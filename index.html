<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Server Browser</title>
    <script src="js/handlebars.min.js"></script>
    <script src="js/jquery-1.11.3.min.js"></script>
    
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-theme.min.css">
    <script src="js/bootstrap.min.js"></script>
    
    <script src="js/dewRcon.js"></script>
    
    <script src="js/browser.js"></script>
    <link rel="stylesheet" href="css/browser.css">  

</head>
<body>
<!--
<img src="images/bg.jpg" id="bg" alt="">
-->
<div id="container">

        <div id="serverList" class="serverlist"> </div>
        <div id="serverInfo" class="col-md-3 serverinfo"> </div>

</div>

<script id="server-panel-template" type="text/x-handlebars-template">
    {{#if  map}}
    <img src="images/maps/{{mapFile}}.png" alt="{{map}}" class="img-responsive">
    <h3>{{ name }} </h3>
    {{#if variant}}
    <h4><b>Gametype: </b>{{ variant }} <br /> <b>Map: </b>{{ map }}</h4>
    {{else}}
    <h4><b>Map: </b>{{ map }}</h4>
    {{/if}}
    <h3>{{hostPlayer}}</h3>
        <div class="panel-heading">
            <h4><b>Players:</b> {{ numPlayers }}/{{ maxPlayers }} <b>Status:</b> {{status}}</h4> 
                {{#if passworded}}
                    <h4><b>[PRIVATE GAME]</b></h4>
                {{else}}
                    <table class="table-striped">
                    <thead>
                        <th>Name</th>
                        <th>Score</th>
                        <th>K</th>
                        <th>D</th>
                        <th>A</th>
                    </thead>
                    <tbody>
                    {{#each players}}
                    {{#if name}}
                    <tr>
                        <td class="col-xs-1">{{this.name}}</td>
                        <td><center>{{score}}</center></td>
                        <td>{{kills}}</td>
                        <td>{{deaths}}</td>
                        <td>{{assists}}</td>
                    </tr>
                    {{/if}}
                    {{/each}}
                    </tbody>
                    </table>
                {{/if}}
    {{else}}
        <h3>Game / Data Unavailable<h3>
    {{/if}}
</script>

<script id="server-listinfo-template" type="text/x-handlebars-template">
{{#if passworded}}
    <div class="row text-danger">
{{else}}
    <div class="row">
{{/if}}
        <div class="col-sm-5"><b>{{ hostPlayer }}</b> <br /> {{ name }}</div>
        <div class="col-xs-3">{{ numPlayers }} <b>/</b> {{ maxPlayers }}
        {{#if passworded}}
        <br /><b>[PRIVATE]</b>
        {{/if}}
        </div>
        {{#if variant}}
        <div class="col-sm-3"><b>{{ variant }}</b> <br /> <em>{{ map }}</em></div>
        {{else}}
        <div class="col-sm-3"><b>{{ map }}</b></div>
        {{/if}}
</div>        
</script>
<script id="server-list-template" type="text/x-handlebars-template">
    <table class="table table-bordered table-hover" id="serverlist{{ i }}">
        <thead>
            <th><center>IP (Click to Join)</center></th>
            <th>Details</th>
            <th><center>Host Location</center></th>
            <th><center>Game Data</center></th>
        </thead>
        <tbody>
    {{#each servers}}
        <tr>
            <td class="col-md-2"><a href="#" onclick="joinServer({{i}});">{{ serverIP }}</a></td>
            <td class="col-xs-1"><a href="#" onclick="updateServerInfo({{i}});"><b>View</b></a></td>
            <td class="col-md-2"><span id="region{{ i }}">Loading...</span></td>
            <td class="col-md-6" id="serverid{{ i }}">Loading...</td>
        </tr>
    {{/each}}
        </tbody>
    </table>
</script>

<script>   
        var serverTemplateSource = $("#server-panel-template").html();
        var serverTemplate = Handlebars.compile(serverTemplateSource);
        
        var serverListTemplateSource = $("#server-list-template").html();
        var serverListTemplate = Handlebars.compile(serverListTemplateSource);
        
        var serverListInfoTemplateSource = $("#server-listinfo-template").html();
        var serverListInfoTemplate = Handlebars.compile(serverListInfoTemplateSource);
 </script>

</body>
</html>